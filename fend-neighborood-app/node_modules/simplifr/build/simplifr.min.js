!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.simplifr=t.simplifr||{})}(this,function(t){"use strict";function e(){return{root:"root",dilimiter:"."}}function i(t,i,r){return i=i||e().dilimiter,r=r||e().root,u({},r,t,i)}function r(t,i,r,n){n=n||e().dilimiter;var o=t[i];if("undefined"==typeof o||"null"==typeof o)return t;if("array"===o.type){var f=o.childs.length?Math.max.apply(null,o.childs):-1;d(r)||(r=[r]),r.forEach(function(e){o.childs.push(++f),u(t,i+n+f,e,n)})}else if("object"===o.type){var c=Object.keys(r);c.forEach(function(e){o.childs.indexOf(e)>-1||(o.childs.push(e),u(t,i+n+e,r[e],n))})}return t}function n(t,e,i,r){return f(t,e,r),u(t,e,i,r),t}function o(t,i,r){r=r||e().dilimiter;var n=i.split(r),o=n.pop(),f=n.length?t[n.join(r)]:t;"array"===f.type&&(o=+o);var c=f.childs.indexOf(o);return c>-1&&f.childs.splice(c,1),p(t,i,r),t}function f(t,i,r){return r=r||e().dilimiter,p(t,i,r),t[i]=null,t}function c(t,i,r){function n(e){var i,o=t[e];return"undefined"==typeof o||"null"==typeof o?o:("array"===o.type?(i=[],o.childs.forEach(function(t){i.push(n(e+r+t))})):"object"===o.type?(i={},o.childs.forEach(function(t){i[t]=n(e+r+t)})):i=o,i)}return r=r||e().dilimiter,i=i||e().root,n(i)}function l(){if(arguments.length){var t=Array.prototype.filter.call(arguments,function(t){return void 0!=t&&""!=t});return Array.prototype.join.call(t,".")}}function u(t,i,r,n){function o(e,i){if(t[i]={type:"object",childs:[]},d(e)){t[i].type="array";for(var r=-1,f=e.length;++r<f;)t[i].childs.push(r),o(e[r],i+n+r)}else if(a(e))for(var c in e)e.hasOwnProperty(c)&&(t[i].childs.push(c),o(e[c],i+n+c));else t[i]=e;return t}return n=n||e().dilimiter,o(r,i),t}function p(t,i,r){r=r||e().dilimiter;var n=t[i];return"undefined"==typeof n||"null"==typeof n?t:("array"!==n.type&&"object"!==n.type||n.childs.forEach(function(e){p(t,i+r+e)}),delete t[i],t)}function d(t){return"[object Array]"===Object.prototype.toString.call(t)}function a(t){return"[object Object]"===Object.prototype.toString.call(t)}t.simplify=i,t.add=r,t.update=n,t.remove=o,t.reset=f,t.desimplify=c,t.join=l});